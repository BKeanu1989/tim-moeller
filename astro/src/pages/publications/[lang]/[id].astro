---
import { getCollection } from 'astro:content';
import NavSideBarLayout from "../../../layouts/NavSideBarLayout.astro";

export async function getStaticPaths() {
  const posts = await getCollection('publications');  
  const languages = ['en', 'de']; // Define supported languages

  return languages.flatMap((lang) =>
    posts.map((post) => ({
      params: { lang, id: post.id }, // Generate paths for both languages
      props: { post, lang }, // Pass post and lang as props
    }))
  );
}

const { post, lang } = Astro.props; // Get post data and language from props
---
<NavSideBarLayout title={post.data.title}>
  <main class="h-full min-h-dvh flex text-white">
    <div class="bg-c-black w-[calc(100dvw-16rem)] relative">
      <h1 class="text-2xl text-center my-5">{post.data.title}</h1>
      <article class="text-center">{post.body}</article>
      <a href={`/${lang}/publications-projects`}>Back to Publications</a> <!-- Correct back link -->
    </div>
  </main>
</NavSideBarLayout>
